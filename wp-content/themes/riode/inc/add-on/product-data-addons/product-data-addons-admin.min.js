!function(e,o){"use strict";window.Riode=window.Riode||{},Riode.admin=Riode.admin||{};var a={init:function(){var e=this;o("#riode_virtual_buy_time").datepicker({defaultDate:"",dateFormat:"yy-mm-dd",numberOfMonths:1,showButtonPanel:!0,maxDate:new Date}),o("#riode_image_change_hover, #riode_virtual_buy_time, #riode_virtual_buy_time_text").on("change",e.requireSave),o("#riode_add_custom_label, .delete").on("click",e.requireSave),o("#riode_data_addons .riode-data-addon-save").on("click",e.saveOptions),o(".riode_custom_labels .color-picker").wpColorPicker(),o("#riode_add_custom_label").on("click",e.addLabel),o(".riode_custom_labels").on("click",".delete",e.removeLabel),e.sortableLabels()},requireSave:function(){o("#riode_data_addons .riode-data-addon-save").prop("disabled",!1)},addLabel:function(){var e=o(this).closest(".form-field");e.siblings(".wc-metabox-template").clone().show().appendTo(e.find(".wc-metaboxes")),o.fn.wpColorPicker&&(e.find(".color-picker").addClass("riode-color-picker"),e.find("input.riode-color-picker").wpColorPicker())},removeLabel:function(e){e.preventDefault(),o(this).closest(".wc-metabox").remove()},sortableLabels:function(){o(".riode_custom_labels .wc-metaboxes").sortable({items:".wc-metabox",cursor:"move",axis:"y",handle:"h3",scrollSensitivity:40,forcePlaceholderSize:!0,helper:"clone",opacity:.65,placeholder:"wc-metabox-sortable-placeholder",start:function(e,o){o.item.css("background-color","#f6f6f6")},stop:function(e,o){o.item.removeAttr("style")}})},saveOptions:function(e){e.preventDefault();var a=[],t=o("#riode_data_addons");o(".riode_custom_labels").find(".wc-metabox").each((function(){var e={};e.label=o(this).find(".label_text").val(),e.bgColor=o(this).find('[name="label_bgcolor"]').val(),e.label&&a.push(e)})),t.block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),o.ajax({type:"POST",dataType:"json",url:riode_product_data_addon_vars.ajax_url,data:{action:"riode_save_product_data_addon_options",nonce:riode_product_data_addon_vars.nonce,post_id:riode_product_data_addon_vars.post_id,image_change_hover:o("#riode_image_change_hover").val(),virtual_buy_time:o("#riode_virtual_buy_time").val(),virtual_buy_time_text:o("#riode_virtual_buy_time_text").val(),custom_labels:a},success:function(){t.unblock()}})}};Riode.admin.productDataAddons=a,o(document).ready((function(){Riode.admin.productDataAddons.init()}))}(wp,jQuery);