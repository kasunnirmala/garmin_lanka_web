window.Riode||(window.Riode={}),function(e){var i={init:function(){e("form.comment-form").attr("enctype","multipart/form-data"),e("body").on("click",".review-medias img, .review-medias figure",i.openLightBox).on("change",'.comment-form .review-medias input[type="file"]',i.uploadMedia).on("click",".comment-form .review-medias .btn-remove",i.removeMedia)},uploadMedia:function(i){if(e(this)[0].files.length){var t=e(this),o=e(this)[0].files[0],n=(new FileReader,t.closest(".file-input"));if(o.size>riode_media_review.max_size)return t.val(""),void alert(riode_media_review.texts.max_size_alert);var a=(window.URL||window.webkitURL).createObjectURL(o);a&&(n.hasClass("image-input")?n.find(".file-input-wrapper").css("background-image","url("+a+")"):n.hasClass("video-input")&&n.find("video").attr("src",a))}},removeMedia:function(i){var t=e(this).closest(".file-input");t.removeClass("invalid-media"),t.find('input[type="file"]').val(""),t.find(".file-input-wrapper").css("background-image",""),t.find("video").attr("src","")},openLightBox:function(i){if(i.preventDefault(),"IMG"==i.target.tagName){var t=e(i.currentTarget),o=t.parent().children().map((function(){e(this);if("IMG"==this.tagName)return{src:this.getAttribute("data-img-src"),w:800,h:900,title:this.getAttribute("alt")||""}})).get();if("undefined"!=typeof PhotoSwipe){var n=e(".pswp")[0],a=new PhotoSwipe(n,PhotoSwipeUI_Default,o,{index:t.index(),closeOnScroll:!1});a.listen("afterInit",(function(){a.shout("initialZoomInEnd")})),a.init()}}else"FIGURE"==i.target.tagName&&Riode.popup({items:{src:'<video src="'+e(i.target).find("video").attr("src")+'" autoplay loop controls>',type:"inline"},mainClass:"mfp-video-popup"},"video")}};Riode.CommentWithMedia=i,Riode.$window.on("riode_complete",(function(){Riode.CommentWithMedia.init()}))}(jQuery);