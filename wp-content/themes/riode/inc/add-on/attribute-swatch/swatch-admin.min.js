!function(t,i){"use strict";var a,e;window.Riode=window.Riode||{},Riode.admin=Riode.admin||{};var o={init:function(){this.onAddImage=this.onAddImage.bind(this),this.onRemoveImage=this.onRemoveImage.bind(this),this.onSelectImage=this.onSelectImage.bind(this),i(document.body).on("click","#swatch_product_options .button_upload_image",this.onAddImage).on("click","#swatch_product_options .button_remove_image",this.onRemoveImage),i("#swatch_product_options .riode-attribute-swatch-save").on("click",this.saveOptions)},onSelectImage:function(){var t=a.state().get("selection").first().toJSON();e.siblings("img").attr("src",t.url),e.siblings("input").val(t.id),a.close()},onAddImage:function(o){e=i(o.currentTarget),a||(a=t.media.frames.downloadable_file=t.media({title:"Choose an image",button:{text:"Use image"},multiple:!1})).on("select",this.onSelectImage),a.open(),o.preventDefault()},onRemoveImage:function(t){var a=i(t.currentTarget);a.siblings("img").attr("src",riode_swatch_admin_vars.placeholder),a.siblings("input").val(""),t.preventDefault()},saveOptions:function(t){t.preventDefault();var a=i("#swatch_product_options"),e={};i("#swatch_product_options .woocommerce_attribute").each((function(){var t=i(this).attr("data-taxonomy");e[t]={},"default"!=i(this).find(".swatch-type").val()&&(e[t].type=i(this).find(".swatch-type").val()),i(this).find("table tbody tr").each((function(){var a=i(this),o=i(this).attr("data-term-id");Number.isInteger(o)||(o=o.toLowerCase().replace("/s+/","_")),e[t][o]={},a.find(".riode-attr-label-input").val()&&a.find(".riode-attr-label-input").val()!=a.find(".riode-attr-label-input").attr("data-origin-value")&&(e[t][o].label=a.find(".riode-attr-label-input").val()),a.find(".riode-color-picker").val()&&a.find(".riode-color-picker").val()!=a.find(".riode-color-picker").attr("data-origin-value")&&(e[t][o].color=a.find(".riode-color-picker").val()),a.find(".upload_image_url").val()&&a.find(".upload_image_url").val()!=a.find(".upload_image_url").attr("data-origin-value")&&(e[t][o].image=a.find(".upload_image_url").val())}))})),a.block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),i.ajax({type:"POST",dataType:"json",url:riode_swatch_admin_vars.ajax_url,data:{action:"riode_save_product_swatch_options",nonce:riode_swatch_admin_vars.nonce,post_id:riode_swatch_admin_vars.post_id,product_type:riode_swatch_admin_vars.product_type,swatch_options:e},success:function(){a.unblock()}})}};Riode.admin.swatchAdmin=o,i(document).ready((function(){Riode.admin.swatchAdmin.init()}))}(wp,jQuery);