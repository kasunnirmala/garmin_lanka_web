!function(e,i){"use strict";var o=window.RiodeAdmin||{},t={install_plugins:function(e){(new s).init(e)},optimize_widgets:function(e){o.OptimizeWizard.optimizeWidgets(e)},install_plugin:function(e){(new s).demoInit(e)}};function s(){var e,o,t=0,s="",n="";function a(e){if("object"==typeof e&&void 0!==e.message)if(o.find("span").text(e.message),void 0!==e.url)e.hash==n?(o.find("span").text("undefined"==typeof riode_setup_wizard_params?riode_optimize_wizard_params.texts.failed:riode_setup_wizard_params.texts.failed),o.hasClass("demo-plugin")&&(o.removeClass("installing"),o.text("Failed")),d()):(n=e.hash,i.post(e.url+"&activate-multi=true",e,(function(i){r(),o.find("span").text(e.message)})).fail(a));else if(void 0!==e.done){if(o.hasClass("demo-plugin")){o.removeClass("installing");var t=i('[data-slug="'+o.data("slug")+'"]').addClass("installed").text("Installed");setTimeout((function(){t.closest("li").fadeOut(400)}),100),i(".riode-install-demo .plugins-used [data-plugin]").filter((function(){return"none"!=this.style.display&&null==this.querySelector(".demo-plugin.installed")})).length?i(".riode-install-demo .riode-install-section").slideUp():i(".riode-install-demo .riode-install-section").slideDown()}d()}else d();else o.hasClass("demo-plugin")&&(o.removeClass("installing"),o.text("Failed")),o.find("span").text("undefined"==typeof riode_setup_wizard_params?riode_optimize_wizard_params.texts.ajax_error:riode_setup_wizard_params.texts.ajax_error),d()}function r(){s&&i.post(ajaxurl,{action:"undefined"==typeof riode_setup_wizard_params?"riode_optimize_wizard_plugins":"riode_setup_wizard_plugins",wpnonce:"undefined"==typeof riode_setup_wizard_params?riode_optimize_wizard_params.wpnonce:riode_setup_wizard_params.wpnonce,slug:s},a).fail(a)}function d(){var n=!1;o&&(o.data("done_item")||(t++,o.data("done_item",1)),o.find(".spinner").css("visibility","hidden")),i(".riode-plugins>li").each((function(){i(this).hasClass("installing")&&(""==s||n?(s=i(this).data("slug"),o=i(this),r(),n=!1):i(this).data("slug")==s&&(n=!0))})),t>=i(".riode-plugins>li.installing").length&&e()}return{init:function(o){i(".riode-plugins > li").each((function(){i(this).find('input[type="checkbox"]').is(":checked")&&i(this).addClass("installing")})),e=function(){i(o).attr("href")&&"#"!=i(o).attr("href")?window.location.href=o.href:window.location.reload()},d()},demoInit:function(i){i&&i.addClass("installing"),s=i.data("slug"),o=i,r(),e=function(){}}}}var n={init:function(){this.initUI()},initUI:function(){i(document.body).on("click",".button-next",(function(e){var o=e.currentTarget,s=i(o);if(n.loadingButton(e.currentTarget)){if(!s.data("callback")||void 0===t[s.data("callback")])return!0;e.preventDefault(),t[s.data("callback")](o)}return!1})).on("click",".riode-card-header",(function(e){var o=i(e.currentTarget),t=o.parent();t.toggleClass("active"),t.hasClass("active")?o.siblings(".riode-card-list").slideDown():o.siblings(".riode-card-list").slideUp()})).on("click",".demo-plugin",(function(e){if(!i(this).data("callback")||void 0===t[i(this).data("callback")])return!0;e.preventDefault(),t[i(this).data("callback")](i(this))}))},loadingButton:function(e){var o=i(e);if("yes"==o.data("done-loading"))return!1;var t=o.text(),s=o.outerWidth(),n="⡀⡀⡀⡀⡀⡀⡀⡀⡀⡀⠄⠂⠁⠁⠂⠄",a=!1;o.css("width",s),o.addClass("button-loading");var r=o.is("input")||o.is("button")?"val":"text";o[r](n),o.data("done-loading","yes");var d=[0,1,2];return function e(){if(!a){for(var i="",t=0;t<d.length;t++)d[t]=d[t]+1,d[t]>=n.length&&(d[t]=0),i+=n.charAt(d[t]);o[r](i),setTimeout((function(){e()}),60)}}(),{done:function(){a=!0,o[r](t),o.removeClass("button-loading"),o.attr("disabled",!1)}}}},a={init:function(){this.initUI(),i(".riode-used-elements-form").length&&(this.loadWidgets(),this.loadTemplates()),this.deactivatePlugins(".installed-plugins > li a"),this.sharePlugins()},initUI:function(){i(document.body).on("click",".checkbox-toggle",(function(e){var o=i(this);o.find(".toggle").hasClass("none")?(o.find(".toggle").removeClass("none").addClass("all"),o.closest(".riode-card").find(".element:not(:disabled)").prop("checked",!0)):(o.find(".toggle").removeClass("all").addClass("none"),o.closest(".riode-card").find(".element:not(:disabled)").prop("checked",!1)),e.stopImmediatePropagation()})).on("click",".element",(function(e){var o=i(this),t=!0,s=!0;o.closest(".riode-card").find(".element:not(:disabled)").each((function(){return this.checked?s=!1:t=!1,s||t})),o.closest(".riode-card").find(".toggle").removeClass("all none").addClass(t?"all":s?"none":"")})).on("click",".riode-resource-steps .step > a",(function(e){var o=i(this),t=o.parent().siblings().find(".active");t.removeClass("active"),o.addClass("active"),i(t.attr("href")).css("display","none"),i(o.attr("href")).css("display","block"),e.preventDefault()})).on("click",".step-navs > a",(function(e){var o=i(this),t=i(".riode-resource-steps .step > a"),s=o.data("step");i(t[Number(s)-1]).trigger("click")}))},loadWidgets:function(){i.ajax({url:ajaxurl,data:{action:"riode_optimize_wizard_widgets_load",wpnonce:riode_optimize_wizard_params.wpnonce},type:"post",success:function(e){i(".riode-admin-panel .riode-used-elements-form #styles .mfp-riode-page-layout")[0].insertAdjacentHTML("beforebegin",e)}}).fail((function(){i(".riode-admin-panel .riode-used-elements-form #styles .mfp-riode-page-layout")[0].insertAdjacentHTML("beforebegin",riode_optimize_wizard_params.texts.loading_failed)})).always((function(){i(".riode-used-elements-form #styles .mfp-riode-page-layout").remove()}))},loadTemplates:function(){i.ajax({url:ajaxurl,data:{action:"riode_optimize_wizard_templates_load",wpnonce:riode_optimize_wizard_params.wpnonce},type:"post",success:function(e){i(".riode-admin-panel .riode-used-elements-form #templates .mfp-riode-page-layout")[0].insertAdjacentHTML("beforebegin",e)}}).fail((function(){i(".riode-admin-panel .riode-used-elements-form #templates .mfp-riode-page-layout")[0].insertAdjacentHTML("beforebegin",riode_optimize_wizard_params.texts.loading_failed)})).always((function(){i(".riode-used-elements-form #templates .mfp-riode-page-layout").remove()}))},optimizeWidgets:function(e){var o=[],t=[],s=[],n=[];i('.riode-used-elements-form .riode-card:not(.shortcode) input[type="checkbox"]').each((function(){var e=this.getAttribute("name");e&&e.startsWith("used[")&&(e=e.match(/used\[([\w|\d|\-|\_]*)\]/i))&&e[1]&&(this.checked?o.push(e[1]):t.push(e[1]))})),i('.riode-used-elements-form .riode-card.shortcode input[type="checkbox"]').each((function(){var e=this.getAttribute("name");e&&e.startsWith("used_shortcode[")&&(e=e.match(/used_shortcode\[([\w|\d|\-|\_]*)\]/i))&&e[1]&&(this.checked?s.push(e[1]):n.push(e[1]))})),i.ajax({url:ajaxurl,data:{action:"riode_optimize_wizard_widgets_optimize",used:o,unused:t,used_shortcode:s,unused_shortcode:n,resource_disable_gutenberg:i('.riode-used-elements-form [name="resource_disable_gutenberg"]')[0].checked,resource_disable_wc_blocks:i('.riode-used-elements-form [name="resource_disable_wc_blocks"]')[0].checked,resource_disable_elementor_unused:i('.riode-used-elements-form [name="resource_disable_elementor_unused"]')[0].checked,wpnonce:riode_optimize_wizard_params.wpnonce},type:"post",success:function(){var i=e.getAttribute("href");i&&"#"!=i?window.location.href=i:window.location.reload()}}).fail((function(){})).always((function(){}))},deactivatePlugins:function(e){i(e).on("click",(function(e){i.ajax({url:ajaxurl,data:{action:"riode_optimize_wizard_plugins_deactivate",url:i(this).attr("href"),wpnonce:riode_optimize_wizard_params.wpnonce},type:"post",success:function(){window.location.reload()}}).fail((function(){})).always((function(){})),e.preventDefault()}))},sharePlugins:function(){var e;i(".btn-plugins").on("click",(function(o){e="",i(".installed-plugins > li:not(:first-child) label").each((function(i){e+=(0==i?"":",")+this.innerHTML+"(v"+this.getAttribute("data-version")+")"})),i("#share_plugins")[0].checked&&i.ajax({url:"https://d-themes.com/wordpress/riode/dummy/api/riode_api/",data:{method:"plugin_list_add",plugins:e,domain:window.location.origin},type:"post",success:function(){}}).fail((function(){})).always((function(){})),o.preventDefault()}))}},r={init:function(){this.initUI(),this.initPluginsUI(),this.initDemoImportUI(),this.initDemoRemove(),this.dummy_index=0,this.dummy_count=0,this.dummy_process="import_start",this.subpages_index=0,this.subpages_count=0,this.subpages_process="import_start"},initUI:function(){i(".button-load-plugins").on("click",(function(e){e.preventDefault(),i(this).hide().closest(".riode-plugins").children(".hidden").hide().fadeIn().removeClass("hidden")})),i(".button-upload").on("click",(function(o){var t,s;o.preventDefault(),void 0===t?((t=e.media.frames.file_frame=e.media({title:"Upload Logo",button:{text:"Select Logo"},multiple:!1})).on("select",(function(){s=t.state().get("selection").first().toJSON(),i(".site-logo").attr("src",s.url),i("#new_logo_id").val(s.id)})),t.open()):t.open()}))},initPluginsUI:function(){i(".riode-plugins input").on("change",(function(){var e=0;e+=i(".riode-plugins [data-slug=elementor] input").is(":checked")?1:0,e+=i(".riode-plugins [data-slug=js_composer] input").is(":checked")?1:0,i(".use-multiple-editors").css("display",e>=2?"inline-block":"none")}))},initDemoImportUI:function(){if(i("#theme-install-demos").length){i(document.body).on("click",".riode-install-demos .theme-wrapper",(function(o){o.preventDefault(),i("#riode-install-options").show();var t=i(this),s=t.closest(".riode-install-demos"),n=s.find(".riode-install-demo"),a=t.find(".plugins-used").data("editor");n.find(".theme-screenshot").attr("src",t.find(".theme-screenshot").attr("src")),n.find(".theme-link").attr("href",t.find(".theme-name").attr("data-live-url")),n.find(".riode-install-demo-header h2").html('<span class="riode-mini-logo"></span>Demo Import - '+t.find(".theme-name").text()).data("title",t.find(".theme-name").text()),n.find(".riode-install-editors>label").addClass("d-none"),n.find(".plugins-used").remove(),i("#riode-install-demo-type").val(t.find(".theme-name").attr("id")),i("#import-status .riode-installing-options>div").removeClass("prepare installing installed"),i("#import-status .import-result").html(""),t.find(".plugins-used").length&&t.find(".plugins-used").clone().insertBefore(s.find(".riode-install-section")),e(),a.forEach((function(e){n.find("#riode-"+e+"-demo").parent().removeClass("d-none")})),i.magnificPopup.open({items:{src:".riode-install-demo"},type:"inline",mainClass:"mfp-with-zoom",zoom:{enabled:!0,duration:300}})}));var e=function(){i(".riode-install-editors input").each((function(){i("#riode-install-options .plugins-used [data-plugin="+this.value+"]").css("display",this.checked?"":"none")})),i(".riode-install-demo .plugins-used [data-plugin]").filter((function(){return"none"!=this.style.display&&null==this.querySelector(".demo-plugin.installed")})).length?i(".riode-install-demo .riode-install-section").slideUp():i(".riode-install-demo .riode-install-section").slideDown()};i(".riode-install-editors input").on("change",e),i(".riode-import-yes").on("click",(function(){if(confirm(riode_setup_wizard_params.texts.confirm_override)){r.addAlertLeavePage();var e=i("#riode-install-demo-type").val(),o=e,t="elementor";i("#riode-js_composer-demo").is(":checked")&&(o="wpb-"+e,t="wpb");var s={demo:e,demo_slug:o,builder:t,import_options:i("#riode-import-options").is(":checked"),reset_menus:i("#riode-reset-menus").is(":checked"),reset_widgets:i("#riode-reset-widgets").is(":checked"),import_dummy:i("#riode-import-dummy").is(":checked"),import_widgets:i("#riode-import-widgets").is(":checked"),import_subpages:i("#riode-import-subpages").is(":checked"),override_contents:i("#riode-override-contents").is(":checked"),dummy_action:i(this).hasClass("alternative")?"riode_import_dummy_step_by_step":"riode_import_dummy"};if(s.demo){i("#import-status .import-result").html("");var n={action:"riode_download_demo_file",demo:o,wpnonce:riode_setup_wizard_params.wpnonce};i.post(ajaxurl,n,(function(e){try{e=i.parseJSON(e)}catch(e){}e&&e.process&&"success"==e.process?r.riode_import_options(s):e&&e.process&&"error"==e.process?r.riode_import_failed(s,e.message):r.riode_import_failed(s)})).fail((function(e){r.riode_import_failed(s)})),s.import_options&&i(".riode-installing-options .riode-import-options").addClass("prepare"),s.import_dummy&&i(".riode-installing-options .riode-import-dummy").addClass("prepare"),s.reset_menus&&i(".riode-installing-options .riode-reset-menus").addClass("prepare"),s.reset_widgets&&i(".riode-installing-options .riode-reset-widgets").addClass("prepare"),s.import_widgets&&i(".riode-installing-options .riode-import-widgets").addClass("prepare"),s.import_subpages&&i(".riode-installing-options .riode-import-subpages").addClass("prepare"),i(".riode-install-demo .riode-install-demo-header h2").html('<span class="riode-mini-logo"></span>'+riode_setup_wizard_params.texts.installing+" "+i("#"+e).html()).addClass("text-left"),i("#riode-install-options").hide()}}}))}},alertLeavePage:function(e){return e.returnValue=riode_setup_wizard_params.texts.leave_confirm},addAlertLeavePage:function(){i(".riode-import-yes.btn-primary").attr("disabled","disabled"),i(".mfp-bg, .mfp-wrap").off("click"),i(window).on("beforeunload",this.alertLeavePage)},removeAlertLeavePage:function(){i(".riode-import-yes.btn-primary").prop("disabled",!1),i(".mfp-bg, .mfp-wrap, .mfp-close").on("click",(function(e){i(e.target).is(".mfp-wrap .mfp-content *:not(.mfp-close)")||(e.preventDefault(),i.magnificPopup.close())})),i(window).off("beforeunload",this.alertLeavePage)},showImportMessage:function(e,o){o&&(o.startsWith("success")&&(o=o.slice(7)),o.startsWith("error")&&(o=o.slice(5)),o&&i("#import-status .import-result").html(o))},riode_import_options:function(e){if(e.demo)if(e.import_options){var o={action:"riode_import_options",demo:e.demo_slug,wpnonce:riode_setup_wizard_params.wpnonce};i(".riode-installing-options .riode-import-options").addClass("installing"),i.post(ajaxurl,o,(function(o){i(".riode-installing-options .riode-import-options").removeClass("installing").addClass("installed"),r.riode_reset_menus(e)})).fail((function(o){i(".riode-installing-options .riode-import-options").removeClass("installing"),r.riode_reset_menus(e)}))}else r.riode_reset_menus(e);else r.removeAlertLeavePage()},riode_reset_menus:function(e){if(e.demo)if(e.reset_menus){var o={action:"riode_reset_menus",import_shortcodes:e.import_shortcodes,wpnonce:riode_setup_wizard_params.wpnonce};i(".riode-installing-options .riode-reset-menus").addClass("installing"),i.post(ajaxurl,o,(function(o){i(".riode-installing-options .riode-reset-menus").removeClass("installing").addClass("installed"),r.riode_reset_widgets(e)})).fail((function(o){i(".riode-installing-options .riode-reset-menus").removeClass("installing"),r.riode_reset_widgets(e)}))}else r.riode_reset_widgets(e);else r.removeAlertLeavePage()},riode_reset_widgets:function(e){if(e.demo)if(e.reset_widgets){var o={action:"riode_reset_widgets",wpnonce:riode_setup_wizard_params.wpnonce};i(".riode-installing-options .riode-reset-widgets").addClass("installing"),i.post(ajaxurl,o,(function(o){i(".riode-installing-options .riode-reset-widgets").removeClass("installing").addClass("installed"),r.riode_import_dummy(e)})).fail((function(o){i(".riode-installing-options .riode-reset-widgets").removeClass("installing"),r.riode_import_dummy(e)}))}else r.riode_import_dummy(e);else r.removeAlertLeavePage()},riode_import_dummy:function(e){if(e.demo)if(e.import_dummy){var o={action:e.dummy_action,process:"import_start",demo:e.demo_slug,override_contents:e.override_contents,wpnonce:riode_setup_wizard_params.wpnonce};this.dummy_index=0,this.dummy_count=0,this.dummy_process="import_start",r.riode_import_dummy_process(e,o),i(".riode-installing-options .riode-import-dummy").addClass("installing")}else r.riode_import_widgets(e);else r.removeAlertLeavePage()},riode_import_dummy_process:function(e,o){i.post(ajaxurl,o,(function(t){if(t&&/^[\],:{}\s]*$/.test(t.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))if("complete"!=(t=i.parseJSON(t)).process){var s={action:o.action,wpnonce:riode_setup_wizard_params.wpnonce};t.process&&(s.process=t.process),t.index&&(s.index=t.index),s.demo=e.demo_slug,s.override_contents=e.override_contents,r.riode_import_dummy_process(e,s),this.dummy_index=t.index,this.dummy_count=t.count,this.dummy_process=t.process,this.dummy_count&&this.dummy_index&&i("#import-status .riode-import-dummy > span:last-child").html("("+Math.min(this.dummy_index/this.dummy_count*100,100).toFixed(0)+"%)")}else"error"==t.process?r.riode_import_failed(e):(r.riode_import_widgets(e),i(".riode-installing-options .riode-import-dummy").removeClass("installing").addClass("installed"));else i(".riode-installing-options .riode-import-dummy").removeClass("installing"),r.riode_import_failed(e)})).fail((function(i){var t;"riode_import_dummy"==o.action?r.riode_import_failed(e):this.dummy_index<this.dummy_count?((t={action:o.action,wpnonce:riode_setup_wizard_params.wpnonce}).process=this.dummy_process,t.index=++this.dummy_index,t.demo=e.demo,r.riode_import_dummy_process(e,t)):((t={action:o.action,wpnonce:riode_setup_wizard_params.wpnonce}).process=this.dummy_process,t.demo=e.demo,r.riode_import_dummy_process(e,t))}))},riode_import_widgets:function(e){if(e.demo)if(e.import_widgets){var o={action:"riode_import_widgets",demo:e.demo_slug,wpnonce:riode_setup_wizard_params.wpnonce};i(".riode-installing-options .riode-import-widgets").addClass("installing"),i.post(ajaxurl,o,(function(o){o&&(i(".riode-installing-options .riode-import-widgets").removeClass("installing").addClass("installed"),r.riode_import_subpages(e))}))}else r.riode_import_subpages(e);else r.removeAlertLeavePage()},riode_import_subpages:function(e){if(e.demo)if(e.import_subpages){var o={action:"riode_import_subpages",process:"import_start",demo:"subpages",override_contents:!0,wpnonce:riode_setup_wizard_params.wpnonce,builder:e.builder};this.subpages_index=0,this.subpages_count=0,this.subpages_process="import_start",r.riode_import_subpages_process(e,o),i(".riode-installing-options .riode-import-subpages").addClass("installing")}else r.riode_import_finished(e);else r.removeAlertLeavePage()},riode_import_subpages_process:function(e,o){i.post(ajaxurl,o,(function(t){if(t&&/^[\],:{}\s]*$/.test(t.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))if("complete"!=(t=i.parseJSON(t)).process){var s={action:o.action,wpnonce:riode_setup_wizard_params.wpnonce,builder:e.builder};t.process&&(s.process=t.process),t.index&&(s.index=t.index),s.demo=e.demo_slug,s.override_contents=e.override_contents,r.riode_import_subpages_process(e,s),this.subpages_index=t.index,this.subpages_count=t.count,this.subpages_process=t.process,this.subpages_count&&this.subpages_index&&i("#import-status .riode-import-subpages > span:last-child").html("("+Math.min(this.subpages_index/this.subpages_count*100,100).toFixed(0)+"%)")}else i(".riode-installing-options .riode-import-subpages").removeClass("installing").addClass("installed"),i.post(ajaxurl,{action:"riode_update_menu_links",wpnonce:riode_setup_wizard_params.wpnonce},(function(i){r.riode_import_finished(e)}));else i(".riode-installing-options .riode-import-subpages").removeClass("installing").addClass("installed"),i.post(ajaxurl,{action:"riode_update_menu_links",wpnonce:riode_setup_wizard_params.wpnonce},(function(i){r.riode_import_finished(e)}))})).fail((function(i){var t;"riode_import_subpages"==o.action?r.riode_import_failed(e):this.subpages_index<this.subpages_count?((t={action:o.action,wpnonce:riode_setup_wizard_params.wpnonce}).process=this.subpages_process,t.index=++this.subpages_index,t.demo=e.demo,r.riode_import_subpages_process(e,t)):((t={action:o.action,wpnonce:riode_setup_wizard_params.wpnonce}).process=this.subpages_process,t.demo=e.demo,r.riode_import_subpages_process(e,t))}))},riode_delete_tmp_dir:function(e){var o={action:"riode_delete_tmp_dir",demo:e,wpnonce:riode_setup_wizard_params.wpnonce};i.post(ajaxurl,o,(function(e){}))},riode_import_failed:function(e,o){r.riode_delete_tmp_dir(e.demo_slug),o&&r.showImportMessage(e.demo,o),r.removeAlertLeavePage(),i(".riode-install-demo .riode-install-demo-header h2").html('<span class="riode-mini-logo"></span>Demo Import - '+i(".riode-install-demos .riode-install-demo-header h2").data("title")+riode_setup_wizard_params.texts.install_failed),i("#riode-install-options").show(),i("#import-status .riode-installing-options>div").removeClass("prepare installing installed")},riode_import_finished:function(e){e.demo?(r.riode_delete_tmp_dir(e.demo_slug),setTimeout((function(){i("#wp-admin-bar-view-site").length?r.showImportMessage(e.demo,'<a href="'+i("#wp-admin-bar-view-site a").attr("href")+'" target="_blank">'+riode_setup_wizard_params.texts.visit_your_site+"</a>"):i("#current_site_link").length?r.showImportMessage(e.demo,'<a href="'+i("#current_site_link").val()+'" target="_blank">'+riode_setup_wizard_params.texts.visit_your_site+"</a>"):i(".riode-installing-options>div"),i(".riode-install-demo .riode-demo-install").html(i("#"+e.demo).html()+riode_setup_wizard_params.texts.install_finished),r.removeAlertLeavePage(),i(".riode-remove-demo-title.mfp-hide").removeClass("mfp-hide").hide().slideDown(),i(".riode-remove-demo .button").prop("disabled",!1)}),300)):removeAlertLeavePage()},initDemoRemove:function(){i(".btn-remove-demo-contents").on("click",(function(e){i(".riode-remove-demo .remove-status").html(""),i.magnificPopup.open({items:{src:".riode-remove-demo"},type:"inline",mainClass:"mfp-with-zoom",zoom:{enabled:!0,duration:300}})})),i(".riode-remove-demo label:first-child input").on("change",(function(e){i(this).is(":checked")?i(this).closest(".riode-remove-demo").find('input[type="checkbox"]').prop("checked",!0):i(this).closest(".riode-remove-demo").find('input[type="checkbox"]').prop("checked",!1)}));var e=function(o,t){var s=o.shift();if(void 0!==s){i(".riode-remove-demo .button").prop("disabled",!0);var n="Other Contents";i('.riode-remove-demo input[value="'+s+'"]').length&&(n=i('.riode-remove-demo input[value="'+s+'"]').parent().text());var a='<h5 class="riode-installing-options"><span class="installing"><span class="riode-loading"></span> Removing '+n+"</span></h5>";i(".riode-remove-demo .remove-status").html(a);var r={action:"riode_sw_remove_demo",wpnonce:riode_setup_wizard_params.wpnonce};-1===s.indexOf("widgets")&&-1===s.indexOf("options")?(r.type="posts",r.post_type=s):r.type=s,i.ajax({url:ajaxurl,type:"POST",dataType:"JSON",data:r,success:function(i){i&&i.success&&e(o,t)},failure:function(){i(".riode-remove-demo .button").prop("disabled",!1),i(".riode-remove-demo .remove-status").html("<h5>Removed failed. Please refresh and try again.</h5>")}})}else i(".riode-remove-demo .remove-status").html('<h5 class="success">Removed successfully.</h5>'),i(".riode-remove-demo .button").prop("disabled",!1)};i(".riode-remove-demo .button").on("click",(function(o){o.preventDefault();var t=[],s=!1;i(this).closest(".riode-remove-demo").find('input[type="checkbox"]:checked').each((function(){i(this).val()?t.push(i(this).val()):s=!0})),s&&t.push("other"),t.length&&e(t,s)}))}},d={init:function(){i("#riode_tools_table .run-tool a").on("click",this.runTool)},runTool:function(e){e.preventDefault();var o=i(this),t=o.closest("tr").attr("class");o.hasClass("disabled")||(d.doLoading(o),i.ajax({url:ajaxurl,type:"post",dataType:"JSON",data:{action:"riode_maintenance_tool_run",wpnonce:riode_maintenance_tools_params.wpnonce,toolname:t},success:function(e){d.endLoading(o),d.showMessage("success",e.data)},failure:function(){d.endLoading(o),d.showMessage("fail",res.data)}}))},doLoading:function(e){e.addClass("disabled"),e.closest(".run-tool").addClass("installing"),e.append('<span class="riode-loading"></span>')},endLoading:function(e){e.children(".riode-loading").remove(),e.closest(".run-tool").removeClass("installing"),e.removeClass("disabled")},showMessage:function(e,o){var t=i('<div class="riode-alert riode-alert-'+e+'"><h4 class="alert-title">'+e+"</h4>"+o+"</div>");i(".riode-admin-panel-content .message-list").append(t),t.animate({opacity:1},400,(function(){var e=setTimeout((function(){t.fadeOut(400,(function(){t.remove()}))}),3500);t.on("click",(function(i){clearTimeout(e),t.fadeOut(400,(function(){t.remove()}))}))}))}},l={init:function(){i("#riode_versions_table .theme-rollback").on("click",this.themeRollback),i("#riode_versions_table .plugin-rollback").on("click",this.pluginRollback)},doLoading:function(e){e.addClass("disabled"),e.closest(".run-tool").addClass("installing"),e.append('<span class="riode-loading"></span>')},endLoading:function(e){e.children(".riode-loading").remove(),e.closest(".run-tool").removeClass("installing"),e.removeClass("disabled")},themeRollback:function(o){var t=i(this);confirm("Do you want to really downgrade theme?")&&(l.doLoading(t),i.ajax({url:ajaxurl,type:"post",dataType:"JSON",data:{action:"riode_modify_theme_auto_updates",wpnonce:riode_version_control_params.wpnonce,version:i("#theme-versions").val()},success:function(i){1==i&&e.updates.ajax("update-theme",{slug:"riode",success:function(){l.endLoading(t),window.location.reload(!0)},error:function(e){l.endLoading(t),alert("failure")}})},failure:function(){}})),o.preventDefault()},pluginRollback:function(o){var t=i(this);confirm("Do you want to really downgrade plugin?")&&i.ajax({url:ajaxurl,type:"post",dataType:"JSON",data:{action:"riode_modify_plugin_auto_updates",wpnonce:riode_version_control_params.wpnonce,version:i("#plugin-versions").val()},success:function(i){1==i&&(l.doLoading(t),e.updates.ajax("update-plugin",{plugin:"riode-core/riode-core.php",slug:"riode-core",success:function(){l.endLoading(t),window.location.reload(!0)},error:function(e){l.endLoading(t),alert("failure")}}))},failure:function(){}}),o.preventDefault()}};o.Wizard=n,o.SetupWizard=r,o.OptimizeWizard=a,o.UpdateTools=d,o.VersionControl=l,i(document).ready((function(){n.init(),r.init(),a.init(),d.init(),l.init()}))}(wp,jQuery);