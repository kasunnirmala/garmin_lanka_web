jQuery(document).ready((function(e){"use strict";var i={init:function(){document.addEventListener("keydown",i.keySave),setTimeout((function(){jQuery("#vc_inline-frame").length>0&&jQuery("#vc_inline-frame")[0].contentWindow.document.addEventListener("keydown",i.keySave)}),1e3),i.addEditWrapperClass(),i.initElementControls(),i.initShortcodes(),i.initAddonOptions()},keySave:function(i){var t=i.key;if("Control"!==t&&i.ctrlKey&&("s"==t||"S"==t)){if(e("body").hasClass("vc_inline-shortcode-edit-form"))e("#vc_button-update").trigger("click");else{var a=e("#content").val();0==a.indexOf("<p>")&&(a=a.slice(3,-5));var o={action:"vc_save",post_id:e("#post_ID").val(),vc_inline:!0,_vcnonce:window.vcAdminNonce,vc_post_custom_css:e("#vc_post-custom-css").val()?e("#vc_post-custom-css").val():"",content:a,pageCss:e("#riode-post-layout-meta-box #page_css").length?e("#riode-post-layout-meta-box #page_css").val():""},n=e("#riode_popup_options");n.length&&n.val()&&(o.riode_popup_options=n.val());var d=e("#riode_edit_area_width");d.length&&d.val()&&(o.riode_edit_area_width=d.val()),e.ajax({url:riode_wpb_admin_vars.ajax_url,data:o,type:"post",success:function(i){if(i.success){var t=e('<div class="wpb-alert wpb-alert-success">Successfully Updated</div>');e("body").append(t),e("#wpb-save-post").html("Update");var a=setTimeout((function(){t.fadeOut(600,(function(){t.remove()}))}),3500);t.on("click",(function(e){clearTimeout(a),t.fadeOut(600,(function(){t.remove()}))}))}}}).fail((function(i){var t=e('<div class="wpb-alert wpb-alert-fail">Update Failed!</div>');e("body").append(t),e("#wpb-save-post").html("Update");var a=setTimeout((function(){t.fadeOut(600,(function(){t.remove()}))}),3500);t.on("click",(function(e){clearTimeout(a),t.fadeOut(600,(function(){t.remove()}))}))}))}i.preventDefault()}},initElementControls:function(){if(e("body").on("click",".vc_edit-form-tab .wpb_el_type_riode_accordion_header",(function(){if(e(this).siblings(".wpb_el_type_riode_accordion_header").removeClass("opened"),e(this).hasClass("opened"))e(this).removeClass("opened"),e(this).siblings(".vc_column:not(.wpb_el_type_riode_accordion_header)").removeClass("show");else{e(this).addClass("opened"),e(this).siblings().removeClass("show");for(var i=e(this).next();i.length&&!i.hasClass("wpb_el_type_riode_accordion_header");)i.addClass("show"),i=i.next()}})),e("body").on("click","#vc_ui-panel-edit-element .vc_ui-tabs-line .vc_ui-tabs-line-trigger",(function(){var i=e("#vc_ui-panel-edit-element .vc_edit-form-tab.vc_active .wpb_el_type_riode_accordion_header").eq(0);i.length&&!i.hasClass("opened")&&i.trigger("click")})),e("#vc_ui-panel-riode-popup-options").length&&e("#vc_post-custom-css").after('<input type="hidden" name="riode_popup_options" id="riode_popup_options" value="" autocomplete="off">'),e("#vc_ui-panel-riode-edit-area-size").length&&e("#vc_post-custom-css").after('<input type="hidden" name="riode_edit_area_width" id="riode_edit_area_width" value="" autocomplete="off">'),e("#vc_ui-panel-post-settings .custom_css").length){e("#riode-post-layout-meta-box #page_css").attr("disabled","disabled");var i=e("#riode-post-layout-meta-box #page_css").val();i&&(e("#vc_post-custom-css").val(i+e("#vc_post-custom-css").val()),e("#riode-post-layout-meta-box #page_css").val(""))}},initAddonOptions:function(){e("body").on("click",'#vc_ui-panel-riode-popup-options [data-vc-ui-element="button-save"]',(function(){var i=e("#vc_ui-panel-riode-popup-options"),t=i.find("#vc_popup-width-field").val(),a=i.find("#vc_popup-transform-field").val(),o=i.find("#vc_popup-position-top-field").val(),n=i.find("#vc_popup-position-right-field").val(),d=i.find("#vc_popup-position-bottom-field").val(),r=i.find("#vc_popup-position-left-field").val(),c=i.find("#vc_popup-animation-field").val(),s=i.find("#vc_popup-anim-duration-field").val(),l={width:t||600,top:o||"auto",right:n||"auto",bottom:d||"auto",left:r||"auto",transform:a||"t-mc",animation:c,anim_duration:s||400};e("#riode_popup_options").val(JSON.stringify(l))})),e("body").on("click",'#vc_ui-panel-riode-edit-area-size [data-vc-ui-element="button-save"]',(function(){var i=e("#vc_ui-panel-riode-edit-area-size").find("#vc_edit-area-width-field").val();e("#riode_edit_area_width").val(i)}))},addEditWrapperClass:function(){riode_core_vars&&riode_core_vars.template_type&&e("#visual_composer_content").addClass("wpb-riode-"+riode_core_vars.template_type+"-builder")},initShortcodes:function(){if(e("body").hasClass("vc_inline-shortcode-edit-form")){var i=function(e,i){for(;i;){var t=e%i;e=i,i=t,z}return e},t=function(e){var i=document.getElementById("vc_inline-frame").contentWindow.Riode,t=(0,document.getElementById("vc_inline-frame").contentWindow.jQuery)("[data-model-id="+e+"]").closest(".owl-carousel");t.trigger("destroy.owl.carousel"),i.slider(t)},a=function(t,a,o,n){var d=document.getElementById("vc_inline-frame").contentWindow.Riode,r=(document.getElementById("vc_inline-frame").contentWindow.jQuery,t.data("creative-preset")),c=t.data("creative-layout");void 0===c&&(c=[]);for(var s=o;s<=n;s++){var l=t.children(".vc_element").eq(s).children(".vc_element-container"),p=l.attr("class"),v=l.data("creative-item"),h={},m=["w","w-xl","w-l","w-m","w-s"],u=["h","h-xl","h-l","h-m","h-s"];r[s]?h=r[s]:(h.w="1-4",h["w-l"]="1-2",h.h="1-3");for(var _=0;_<5;_++)if(v[m[_]])for(var f=_;f<5;f++)h[m[f]]=v[m[_]];for(_=0;_<5;_++)v[u[_]]&&"preset"!=v[u[_]]&&"child"!=v[u[_]]&&(h[u[_]]=v[u[_]]);(p=(p=l.parent(".vc_wpb_riode_masonry_item").attr("class")).match(/(grid-item .* grid-item-end-class)/g))&&l.parent(".vc_wpb_riode_masonry_item").removeClass(p[0]),l.removeAttr("data-creative-item"),p="grid-item ",Object.entries(h).forEach((function(e){p+=e[0]+"-"+e[1]+" "})),p+="grid-item-end-class",l.parent(".vc_wpb_riode_masonry_item").addClass(p).attr("data-creative-item",JSON.stringify(h)),c[s]=h;var w=["","-xl","-lg","-md","-sm"];for(_=0;_<w.length;_++)l.parent().attr("data-creative-order"+w[_],null==l.attr("data-creative-order"+w[_])?l.parent().index()+1:l.attr("data-creative-order"+w[_]))}t.data("creative-layout",c),t.children(".grid-space").remove(),t.append(e('<div class="grid-space"></div>')),t.before("style").remove(),t.before(function(e,t,a,o){if(void 0!==t){var n=[],d=[],r="",c={w:[],"w-l":[],"w-m":[],"w-s":[]},s={h:[],"h-l":[],"h-m":[]};r+='<style scope="">',t.map((function(e){Object.entries(e).forEach((function(e){if("size"!=e[0]){var i=e[1].split("-");null!=i[1]&&-1==n.indexOf(i[1])&&n.push(i[1]),-1==d.indexOf(i[0])&&d.push(i[0]),"w"!=e[0]&&"w-l"!=e[0]&&"w-m"!=e[0]&&"w-s"!=e[0]||-1!=c[e[0]].indexOf(e[1])?"h"!=e[0]&&"h-l"!=e[0]&&"h-m"!=e[0]||-1!=s[e[0]].indexOf(e[1])||s[e[0]].push(e[1]):c[e[0]].push(e[1])}}))})),Object.entries(c).forEach((function(i){i[1].length&&("w-xl"==i[0]?r+="@media (max-width: 1199px) {":"w-l"==i[0]?r+="@media (max-width: 991px) {":"w-m"==i[0]?r+="@media (max-width: 767px) {":"w-s"==i[0]&&(r+="@media (max-width: 575px) {"),i[1].map((function(t){var a=t.split("-"),o=null==a[1]?100:(100*a[0]/a[1]).toFixed(4);r+="."+e+" .grid-item."+i[0]+"-"+t+"{flex:0 0 "+o+"%;width:"+o+"%}"})),"w-xl"!=i[0]&&"w-l"!=i[0]&&"w-m"!=i[0]&&"w-s"!=i[0]||(r+="}"))})),Object.entries(s).forEach((function(i){i[1].length&&i[1].map((function(t){var n,d=t.split("-");n=null!=d[1]?a*d[0]/d[1]:a,"h"==i[0]?(r+="."+e+" .h-"+t+"{height:"+n.toFixed(2)+"px}",r+="@media (max-width: 767px) {",r+="."+e+" .h-"+t+"{height:"+(n*o/100).toFixed(2)+"px}",r+="}"):"h-xl"==i[0]?(r+="@media (max-width: 1199px) {",r+="."+e+" .h-xl-"+t+"{height:"+n.toFixed(2)+"px}",r+="}",r+="@media (max-width: 767px) {",r+="."+e+" .h-xl-"+t+"{height:"+(n*o/100).toFixed(2)+"px}",r+="}"):"h-l"==i[0]?(r+="@media (max-width: 991px) {",r+="."+e+" .h-l-"+t+"{height:"+n.toFixed(2)+"px}",r+="}",r+="@media (max-width: 767px) {",r+="."+e+" .h-l-"+t+"{height:"+(n*o/100).toFixed(2)+"px}",r+="}"):"h-m"==i[0]?(r+="@media (max-width: 767px) {",r+="."+e+" .h-m-"+t+"{height:"+(n*o/100).toFixed(2)+"px}",r+="}"):"h-s"==i[0]&&(r+="@media (max-width: 575px) {",r+="."+e+" .h-s-"+t+"{height:"+n.toFixed(2)+"px}",r+="}")}))}));var l=1;n.map((function(e){l=l*e/i(l,e)}));var p=d[0];d.map((function(e){p=i(p,e)}));var v=Math.floor(100*p/l*1e4)/1e4;return r+="."+e+".grid>.grid-space{flex: 0 0 "+(v<.01?100:v)+"%;width:"+(v<.01?100:v)+"%}",r+="</style>"}}(t.data("creative-id"),t.data("creative-layout"),t.data("creative-height"),t.data("creative-height-ratio"))),t.data("isotope")&&t.isotope("destroy"),t.hasClass("grid-float")&&t.children(".grid-item").each((function(){e(this).css({position:"",left:"",top:""})})),d.isotopes(t),t.find(".owl-carousel").trigger("refresh.owl.carousel"),e(window).trigger("resize")};if(window.InlineShortcodeView){window.InlineShortcodeView.prototype.destroy;window.InlineShortcodeView.prototype.destroy=function(e){vc.events.trigger("shortcodeView:destroy",this.model),e&&e.preventDefault&&e.preventDefault(),e&&e.stopPropagation&&e.stopPropagation(),vc.showMessage(window.sprintf(window.i18nLocale.inline_element_deleted,this.model.setting("name"))),this.model.destroy()}}window.vc.events.on("shortcodeView:ready",(function(i){if(i.view&&i.view.$el){var o=document.getElementById("vc_inline-frame").contentWindow.Riode,n=document.getElementById("vc_inline-frame").contentWindow.jQuery,d=i.attributes.shortcode,r=i.view.$el,c=i.view.model.attributes.id;if("wpb_riode_masonry_item"==d){var s=n("[data-model-id="+c+"]").parent(".riode-masonry-container");a(s,0,r.index(),r.siblings(".grid-item").length)}else if("wpb_riode_masonry"==d){s=n("[data-model-id="+c+"]").children(".riode-masonry-container");a(s,0,0,r.children(".vc_element-container").children(".vc_element").length-1)}else if("wpb_riode_carousel"==d){(u=n("[data-model-id="+c+"]").children(".riode-carousel-container").children(".owl-carousel")).children(".owl-stage-outer").length&&(u.children(".owl-stage-outer").children(".owl-stage").children(".owl-item:not(.cloned)").each((function(){u.append(e(this).children())})),u.children(".owl-stage-outer, .owl-nav, .owl-dots").remove()),o.slider(u)}else if("wpb_riode_tab"==d){var l=r.children(".riode-tab-container").children(".tab").children(".nav-tabs");r.children(".riode-tab-container").children(".tab").children(".tab-content").children().each((function(){l.append(e('<li class="nav-item"><a class="nav-link'+(e(this).hasClass("active")?" active":"")+'" href="#" target="_blank">'+e(this).children(".riode-tab-item-container").data("tab-title")+"</a></li>"))}))}else if("wpb_riode_tab_item"==d)r.children(".riode-tab-item-container").removeClass("tab-pane"),r.addClass("tab-pane"),r.siblings(".active").length&&r.children(".riode-tab-item-container").removeClass("active"),r.children(".riode-tab-item-container").hasClass("active")&&r.addClass("active"),1==i.attributes.cloned?r.closest(".tab").find(".nav-tabs").children(".nav-item").eq(r.index()-1).after(e('<li class="nav-item"><a class="nav-link" href="#" target="_blank">'+r.children(".riode-tab-item-container").data("tab-title")+"</a></li>")):r.closest(".tab").find(".nav-tabs > .nav-item").eq(r.index()-1).length?r.closest(".tab").find(".nav-tabs > .nav-item").eq(r.index()).children(".nav-link").text(r.children(".riode-tab-item-container").data("tab-title")):r.closest(".tab").find(".nav-tabs").append(e('<li class="nav-item"><a class="nav-link" href="#" target="_blank">'+r.children(".riode-tab-item-container").data("tab-title")+"</a></li>"));else if("wpb_riode_accordion"==d){var p=r.children(".riode-accordion-container").data("accordion-icon"),v=r.children(".riode-accordion-container").data("accordion-active-icon");r.find(" > .riode-accordion-container > .accordion > .card").each((function(){var i=e(this).find("> .riode-accordion-item-container > .card-header > a");i.find(".toggle-icon").remove(),p&&i.append(e('<span class="toggle-icon closed"><i class="'+p+'"></i></span>')),v&&i.append(e('<span class="toggle-icon opened"><i class="'+v+'"></i></span>'))}))}else if("wpb_riode_accordion_item"==d){p=r.closest(".riode-accordion-container").data("accordion-icon"),v=r.closest(".riode-accordion-container").data("accordion-active-icon");var h=r.find(" > .riode-accordion-item-container > .card-header > a"),m=r.closest(".accordion");r.addClass("card"),r.children(".riode-accordion-item-container").removeClass("card"),p&&!h.children(".closed").length&&h.append(e('<span class="toggle-icon closed"><i class="'+p+'"></i></span>')),v&&!h.children(".opened").length&&h.append(e('<span class="toggle-icon opened"><i class="'+v+'"></i></span>')),m.find("> .card > .riode-accordion-item-container > .card-header > .collapse").length||(h.addClass("collapse").removeClass("expand"),h.parent(".card-header").siblings(".card-body").removeClass("collapsed").addClass("expanded"))}else if("wpb_riode_vendor"==d){var u=n("[data-model-id="+c+"]").find(".riode-wpb-vendors-container .owl-carousel");o.slider(u)}(r.parent().hasClass("owl-item")||r.parent().hasClass("owl-carousel"))&&t(c)}})),window.vc.events.on("shortcodeView:destroy",(function(e){var i=e.attributes.shortcode,a=e.view.$el,o=e.view.model.attributes.id;if("wpb_riode_tab_item"==i){var n=a.index();a.closest(".tab").children(".nav-tabs").children(".nav-item").eq(n).remove(),a.hasClass("active")&&(a.closest(".tab").children(".nav-tabs").children(".nav-item:first-child").find("a").addClass("active"),a.parent().children(".tab-pane:nth-child("+(0==n?2:1)+")").addClass("active"))}a.parent().hasClass("owl-item")&&t(o)}))}}};i.init()}));